name: CI Build

on:
  workflow_dispatch:
    inputs:
      version:
        description: NuGet Package Version
        required: true

jobs:
      
  Publish NuGet Package:
    runs-on: macos-latest
    steps:

    - name: Setup .NET Core SDK 5.0.x
      uses: actions/setup-dotnet@v1
      with:
        dotnet-version: '5.0.x'

    - uses: actions/checkout@v1
    - name: Android
      run: |
        nuget restore
        cd Library
        msbuild /p:Configuration=Release RadarIO.Xamarin
        msbuild /p:Configuration=Release RadarIO.Xamarin.iOS
        msbuild /p:Configuration=Release RadarIO.Xamarin.Android
        nuget pack
        echo ${{ github.event.inputs.version }}